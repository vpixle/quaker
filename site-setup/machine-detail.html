
<!doctype html>
<html>
<head>
<base href="http://quaker.vpixle.com/" />
<link rel="apple-touch-icon-precomposed" href="apple-touch-icon.png">
<link rel="apple-touch-startup-image" href="apple-touch-start.png">  
<meta http-equiv="content-type" content="text/html;charset=UTF-8" />
<meta http-equiv="content-language" content="en" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<title>Quaker - Machine Detail</title>
<link rel="stylesheet" href="http://quaker.vpixle.com/jQM/themes/quaker2.min.css" />
<link rel="stylesheet" href="http://quaker.vpixle.com/jQM/css/jquery.mobile-1.2.0-alpha.1.min.css" />

<link rel="stylesheet" href="http://quaker.vpixle.com/jQM/css/custom.css" />

<script src="http://quaker.vpixle.com/jQM/js/jquery-1.7.2.min.js"></script>
<script src="http://quaker.vpixle.com/jQM/js/mobileinit.js" type="text/javascript"></script>
<script src="http://quaker.vpixle.com/jQM/js/ios-orientationchange-fix.min.js" type="text/javascript"></script>
<script src="http://quaker.vpixle.com/jQM/js/application.js" type="text/javascript"></script>
<script src="http://quaker.vpixle.com/jQM/js/jquery.mobile-1.2.0-alpha.1.min.js"></script>
</head>
<body>
	<div data-role="page" data-theme="g" id="qkr_232">
  <div data-role="header" data-theme="g" data-position="fixed" data-tap-toggle="false" >
    <h1>Machine Detail</h1>
  </div><!-- /header -->
	<div data-role="content">
		<br/>
		<form action="" >
			<div data-role="collapsible-set">
				<div data-role="collapsible" data-collapsed="false" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-content-theme="c">
					<h3>Machine details</h3>
					<div data-role="fieldcontain">
						<label for="smachine_ref">System Reference</label>
						<input type="text" name="smachine_ref" id="smachine_ref" required autofocus />
					</div>
					<div data-role="fieldcontain">
						<label for="smachineloc">Machine location</label>
						<input type="text" name="smachineloc" id="smachineloc" />
					</div>
					<div data-role="fieldcontain">
						<label for="sbrixfactor">Brix factor</label>
						<input type="number" name="sbrixfactor" id="sbrixfactor" min="0" step=".1"/>
					</div>
					<div data-role="fieldcontain">
						<label for="starget_min">Target fluid concentration [%]</label>
						<input type="number" name="starget_min" id="starget_min" min="0" max="100" />
					</div>
					<div data-role="fieldcontain">
						<label for="starget_max">&nbsp;</label>
						<input type="number" name="starget_max" id="starget_max" min="0" max="100" />
					</div>
				</div><!-- /header -->	
				<div data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-content-theme="c">
					<h3>Machine details</h3>
					<div data-role="fieldcontain">
						<label for="smachinemake">Machine Make</label>
						<input type="text" name="smachinemake" id="smachinemake"   />
					</div>
					<div data-role="fieldcontain">
						<label for="smachineage">Age</label>
						<input type="number" name="smachineage" id="smachineage" min="0" step='0.1' />
					</div>
					<div data-role="fieldcontain" >
						<label for="sindividual">System</label>
						<select name="sindividual" id="sindividual" data-role="slider">
								<option value="individual">Individual</option>
								<option value="central">Central system</option>
						</select> 
					</div>
	
	
					<div data-role="fieldcontain">
						<label for="ssumpsize">Sump Size [dm&sup3;]</label>
						<input type="number" name="ssumpsize" id="ssumpsize" min="0" step='0.1' />
					</div>

					<div data-role="fieldcontain">
						<label for="soperation" >Main Opreations</label>
						<select name="soperation" id="soperation" multiple="multiple" data-native-menu="false">                                       
							<option>Choose operation</option>
							<option value="turning">Turning</option>                                       
							<option value="milling">Milling</option>                                       
							<option value="drilling">Drilling</option>
							<option value="grinding">Grinding</option>                                       
							<option value="reaming">Reaming</option> 
							<option value="boring">Boring</option> 
							<option value="sawing">Sawing</option> 
							<option value="broaching">Broaching</option> 
							<option value="shaving">Shaving</option> 
							<option value="hobbing">Hobbing</option> 
							<option value="gear cutting">Gear cutting</option> 
							<option value="forming">Forming</option> 
							<option value="tapping">Tapping</option> 
						</select>                           
					</div>
					<div data-role="fieldcontain">
						<label for="smaterial">Materials Processed</label>
						<select name="smaterial" id="smaterial" multiple="multiple" data-native-menu="false">                                       
							<option>Choose material</option>
							<option value="cast_iron">Cast Iron</option>                                       
							<option value="aluminium">Aluminium</option>                                       
							<option value="steel">Steel</option>
							<option value="stainless">Stainless</option>
							<option value="brass">Brass/Bronze</option>
						</select>                           
					</div>
					<div data-role="fieldcontain">
						<label for="sfilter">Filter</label>
						<select name="sfilter" id="sfilter" data-native-menu="true">                                       
							<option>Choose filter type</option>
							<option value="paper">Paper filter</option>                                       
							<option value="band">Band filter</option>                                       
							<option value="skimmer">Skimmer</option>
							<option value="centrifuge">Centrifuge</option>
							<option value="magnet">Magnet fliter</option>
						</select>                           
					</div>
				</div><!-- /machine -->
				<div data-role="collapsible" data-collapsed="true" data-collapsed-icon="arrow-r" data-expanded-icon="arrow-d" data-content-theme="c">
					<h3>Emulsion parameters</h3>
					<div data-role="fieldcontain">
						<label for="sfluid">Cutting Fluid</label>
						<input type="text" name="sfluid" id="sfluid" />
					</div>
					<div data-role="fieldcontain">
						<label for="sfluidmake">Supplier</label>
						<select name="sfluidmake" id="sfluidmake" data-native-menu="true" >
							<option>Fluid supplier</option>
							<option value="quaker">Quaker</option>
							<option value="castrol">Castrol</option>
							<option value="fuchs">Fuchs</option>
							<option value="shell">Shell</option>
							<option value="houghton">Houghton</option>
							<option value="exxonMobil">ExxonMobil</option>
							<option value="da_stuart">D.A. Stuart</option>
							<option value="total">Total</option>
							<option value="petrofer">Petrofer</option>
							<option value="bechem">Bechem</option>
							<option value="blaser">Blaser</option>
							<option value="cimcool">Cimcool</option>
							<option value="rhenus">Rhenus</option>
							<option value="kuwait">Kuwait (Q8)</option>
							<option value="oemeta">Oemeta</option>
							<option value="condat">Condat</option>
							<option value="henkel">Henkel</option>
							<option value="master_chemcial">Master Chemcial</option>
							<option value="yushiro">Yushiro</option>
							<option value="morris">Morris</option>
							<option value="rocol">Rocol</option>
							<option value="itw_chemin">ITW Chemin</option>
							<option value="itw_chemin">Other</option>
						</select>
					</div>
					<div data-role="fieldcontain">
						<label for="sinitialfill">Initial Fill Date</label>
						<input type="date" name="sinitialfill" id="sinitialfill" />
					</div>
	
					<div data-role="fieldcontain">                                 
						<label for="swater">Water Type</label>
						<select name="swater" id="swater" data-native-menu="true">                                       
							<option>Choose water type</option>
							<option value="soft">Soft (below 5°dH)</option>                                       
							<option value="medium">Medium ( 5-15°dH)</option>                                       
							<option value="hard">Hard (above 15°dH)</option>                                       
						</select>                           
					</div>
					<div data-role="fieldcontain">
						<label for="swatersrc">Water Source</label>
						<select name="swatersrc" id="swatersrc" data-native-menu="true">                                       
							<option>Choose water source</option>
							<option value="tap">Tap</option>                                       
							<option value="river">River</option>                                       
							<option value="well">Well</option>
							<option value="industrial">Industrial</option>                                       
						</select>                           
					</div>
				</div><!-- /fluid -->
			</div><!-- /collapsible-set -->
			</br>
			<div class="ui-grid-a">                              
				<div class="ui-block-a">                                      
					<a href="#" onclick="resetmachine();" data-theme="b" data-icon="delete" data-iconpos="left" data-role="button">Reset</a>
				</div>                              
				<div class="ui-block-b">                                      
					<a href="#" onclick="savemachine();" data-theme="g" data-icon="check" data-iconpos="left" data-role="button">Save</a>
				</div>      
			</div>
		</form>
	</div><!-- /content -->
	<div data-theme="h" data-role="footer" data-position="fixed" data-tap-toggle="false">                
  <div data-role="navbar" class="nav-glyphish">                    
    <ul>
     <li class="first"><a href="../maintenance/" id="maintenance" data-icon="custom"  >Maintenance</a></li> 
     <li><a href="../troubleshooting/" id="trouble" data-icon="custom" >Troubleshooting</a></li>
     <li class="last"><a href="../site-setup/" id="sitesetup" data-icon="custom" class="ui-btn-active ui-state-persist" >Site Setup</a></li>
    </ul>                
  </div><!-- /navbar -->            
</div><!-- /footer -->
<script>

$('#qkr_232').live('pagebeforeshow', function(event) {
    initDatabase();
    the_id = window.localStorage.getItem("the_id"); 
    query = 'SELECT * FROM site_settings WHERE id="' + window.localStorage.getItem("the_id") + '\"';
    db.transaction(function(tx) {
        tx.executeSql(query, [], function(tx, result) {
            item = result.rows.item(0);
			//window.localStorage.setItem("the_id", item['id']);
			$("#smachine_ref").val(item['machine_ref']);
			$("#sindividual").val(item['individual']);
			$("#smachineloc").val(item['machineloc']);
			$("#ssumpsize").val(item['sumpsize']);
			$("#smachinemake").val(item['machinemake']);
			$("#smachineage").val(item['machineage']);
			$("#sfluid").val(item['fluid']);
			$("#sfluidmake").val(item['fluidmake']);
			$("#starget_min").val(item['target_min']);
			$("#starget_max").val(item['target_max']);
			$("#sbrixfactor").val(item['brixfactor']);
			$("#sinitialfill").val(item['initialfill']);
			$("#swater").val(item['water']);
			$("#swatersrc").val(item['watersrc']);
			$("#soperation").val(item['operation']);
			$("#smaterial").val(item['material']);

			 $("#sfilter").val(item['filter']);		
        }, errorHandler);
    });
});

function savemachine() {
  initDatabase();
		the_id = window.localStorage.getItem("the_id");
  db.transaction(function(tx) {
		tx.executeSql("UPDATE site_settings SET machine_ref= ? WHERE id = ?", [smachine_ref.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET individual= ? WHERE id = ?", [sindividual.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET machineloc= ? WHERE id = ?", [smachineloc.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET sumpsize= ? WHERE id = ?", [ssumpsize.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET machinemake= ? WHERE id = ?", [smachinemake.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET machineage= ? WHERE id = ?", [smachineage.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET fluid= ? WHERE id = ?", [sfluid.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET fluidmake= ? WHERE id = ?", [sfluidmake.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET target_min= ? WHERE id = ?", [starget_min.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET target_max= ? WHERE id = ?", [starget_max.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET brixfactor= ? WHERE id = ?", [sbrixfactor.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET initialfill= ? WHERE id = ?", [sinitialfill.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET water= ? WHERE id = ?", [swater.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET watersrc= ? WHERE id = ?", [swatersrc.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET operation= ? WHERE id = ?", [soperation.value, the_id], null, errorHandler);
		tx.executeSql("UPDATE site_settings SET material= ? WHERE id = ?", [smaterial.value, the_id], null, errorHandler);

		tx.executeSql("UPDATE site_settings SET filter= ? WHERE id = ?", [sfilter.value, the_id], null, errorHandler);
  });
$.mobile.changePage("../site-setup/index.html");
}

function resetmachine() {
   $('#sindividual').val('on').slider('refresh');
   $('#smachineloc').val(null);
   $('#ssumpsize').val('0');
   $('#smachinemake').val(null);
   $('#smachineage').val('0');
   $('#sfluid').val(null);
   $('#sfluidmake').val('Fluid supplier').selectmenu('refresh');
   $('#starget_min').val('0');
   $('#starget_max').val('0');
   $('#sbrixfactor').val('0');
   $('#sinitialfill').val('0');
   $('#swater').val('Choose water type').selectmenu('refresh');
   $('#swatersrc').val('Choose water source').selectmenu('refresh');
   $('#soperation').val('Choose operation').selectmenu('refresh');
   $('#smaterial').val('Choose material').selectmenu('refresh');

   $('#sfilter').val('Choose filter type').selectmenu('refresh');
}

</script>
</div><!-- /page -->  
</body>
</html>